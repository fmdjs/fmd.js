fmd("module","global env cache lang event config".split(" "),function(e,h,m,f,d,n){var p=[],k=0,g=m.modules={},l={require:function(a){a.require||c.makeRequire(a);d.emit("makeRequire",a.require,a);return a.require},exports:function(a){return a.exports},module:function(a){a.module={id:a.id,exports:a.exports};return a.module}},c=function(a,b,c){this.id=a;this.deps=b||[];this.factory=c;this.exports={};this.unnamed()&&(a="_!_fmd_anonymous_"+k,k++);this.uid=a};c.prototype={unnamed:function(){return""===
this.id},extract:function(){var a=this,b=a.deps,d=[];f.isArray(b)&&f.forEach(b,function(b){var f;(f=l[b])?b=f(a):(a.require||c.makeRequire(a),b=a.require(b));d.push(b)});return d},compile:function(){if(n.get("hasCatch"))try{c.compile(this)}catch(a){d.emit("compileFailed",a,this)}else c.compile(this)},autocompile:function(){this.unnamed()&&this.compile()}};c.get=function(a){return g[a]};c.has=function(a,b){if(l[a])return!0;var c={id:a};b&&d.emit("alias",c);return g[c.id]?!0:!1};c.save=function(a){g[a.uid]=
a;d.emit("saved",a);a.autocompile()};c.require=function(a){var b=c.get(a);if(!b)return d.emit("requireFailed",{id:a}),null;b.compiled||(b.compiled=!0,b.compile());d.emit("required",b);return b.exports};c.makeRequire=function(a){a.require=function(b){b={id:b};d.emit("relative",b,a);d.emit("alias",b);return c.require(b.id)}};c.define=function(a,b,e){var g=arguments.length;1===g?(e=a,a=""):2===g&&(e=b,b=p,f.isString(a)||(b=a,a=""));if(c.has(a,!0))return d.emit("existed",{id:a}),null;c.save(new c(a,b,
e))};c.compile=function(a){if(f.isFunction(a.factory)){var b=a.extract(),b=a.factory.apply(null,b);void 0!==b?a.exports=b:a.module&&a.module.exports&&(a.exports=a.module.exports);a.module&&delete a.module}else void 0!==a.factory&&(a.exports=a.factory);d.emit("compiled",a)};c.define.fmd={};var q=e.define;h.noConflict=function(){e.define=q};h.define=e.define=c.define;return c});
