fmd("module",["global","env","cache","lang","event"],function(e,n,t,r,i){var o,u="",c=[],a="_!_fmd_anonymous_",s=0,l=t.modules={},f={require:function(e){return e.require=function(e){return d.require(e)},i.emit("makeRequire",e.require,e),e.require},exports:function(e){return e.exports},module:function(e){return e.module={id:e.id,exports:e.exports},e.module}},d=function(e,n,t){var r=this;r.id=e,r.deps=n||[],r.factory=t,r.exports={},r.unnamed()&&(e=a+s,s++),r.uid=e};d.prototype={unnamed:function(){return this.id===u},extract:function(){var e=this,n=e.deps,t=[];return r.isArray(n)&&r.forEach(n,function(n){var r,i;r=(i=f[n])?i(e):d.require(n),t.push(r)}),t},compile:function(){var e=this;try{if(r.isFunction(e.factory)){var n=e.extract(),t=e.factory.apply(null,n);t!==o?e.exports=t:e.module&&e.module.exports&&(e.exports=e.module.exports),e.module&&delete e.module}else e.factory!==o&&(e.exports=e.factory);i.emit("compiled",e)}catch(u){i.emit("compileFailed",u,e)}},autocompile:function(){this.unnamed()&&this.compile()}},d.get=function(e){var n={id:e};return i.emit("alias",n),l[n.id]},d.has=function(e){return d.get(e)||f[e]?!0:!1},d.save=function(e){l[e.uid]=e,i.emit("saved",e),e.autocompile()},d.require=function(e){var n=d.get(e);return n?(n.compiled||(n.compiled=!0,n.compile()),i.emit("required",n),n.exports):(i.emit("requireFailed",{id:e}),null)},d.define=function(e,n,t){var o=arguments.length;return 1===o?(t=e,e=u):2===o&&(t=n,n=c,r.isString(e)||(n=e,e=u)),d.has(e)?(i.emit("existed",{id:e}),null):(d.save(new d(e,n,t)),void 0)};var m=e.define;return n.noConflict=function(){e.define=m},n.define=e.define=d.define,d});