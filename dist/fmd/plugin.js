fmd("plugin",["cache","lang","event","config","when","remote"],function(e,n,t,r,i,u){var o=e.plugin={},c=/(.+)!(.+)/,a="analyze",s={defaultPlugin:"async",register:function(e,n){o[e]=n},sorting:function(e){var t,r,i=[],u={};return n.forEach(e,function(e){u[e.plugin]>-1?r=i[u[e.plugin]]:(t=u[e.plugin]=i.length,r=i[t]={group:[],execute:o[e.plugin]}),r.group.push(e)}),i}};s.register(s.defaultPlugin,function(e){u.get(this.group,e)});var l=function(e){var n=e.id.match(c);n&&(e.plugin=n[1],e.id=n[2]),!o[e.plugin]&&(e.plugin=s.defaultPlugin)},f=function(e,t){i.apply(null,n.map(s.sorting(e),function(e){return function(n){e.execute?e.execute(function(){n.resolve()}):n.resolve()}})).then(t)};return r.register({keys:"plugin",rule:function(e,n,r){r=!!r,e!==r&&(this.plugin=r,r===!0?(t.on(a,l),u.bring=f):(t.off(a,l),u.bring=u.get))}}).set({plugin:!0}),s});