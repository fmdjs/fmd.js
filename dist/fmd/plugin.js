fmd("plugin","cache lang event config when remote".split(" "),function(l,g,h,m,n,d){var f=l.plugin={},p=/(.+)!(.+)/,e={defaultPlugin:"async",register:function(a,b){f[a]=b},sorting:function(a){var b=[],c={},e,d;g.forEach(a,function(a){-1<c[a.plugin]?d=b[c[a.plugin]]:(e=c[a.plugin]=b.length,d=b[e]={group:[],execute:f[a.plugin]});d.group.push(a)});return b}};e.register(e.defaultPlugin,function(a){d.get(this.group,a)});var k=function(a){var b=a.id.match(p);b&&(a.plugin=b[1],a.id=b[2]);!f[a.plugin]&&(a.plugin=
e.defaultPlugin)},q=function(a,b){n.apply(null,g.map(e.sorting(a),function(a){return function(b){a.execute?a.execute(function(){b.resolve()}):b.resolve()}})).then(b)};m.register({keys:"plugin",rule:function(a,b,c){c=!!c;a!==c&&(this.plugin=c,!0===c?(h.on("analyze",k),d.bring=q):(h.off("analyze",k),d.bring=d.get))}}).set({plugin:!0});return e});
