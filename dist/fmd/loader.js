fmd("loader",["global","event","config","request"],function(e,t,n,r){var i="loading",o="loaded",u="requestComplete",c=function(){};n.set({timeout:1e4}),t.on(u,function(e){var t,n;for(e.state=o,n=e.onload;t=n.shift();)t()});var a=function(a,s){return s||(s=c),a.state===o?(s(),void 0):a.state===i?(a.onload.push(s),void 0):(a.state=i,a.onload=[s],t.emit("request",a,s),a.requested||(a.timer=e.setTimeout(function(){t.emit("requestTimeout",a)},n.get("timeout")),r(a,function(){e.clearTimeout(a.timer),t.emit(u,a)})),void 0)};return a});