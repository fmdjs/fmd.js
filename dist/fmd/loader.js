fmd("loader",["global","event","config","request"],function(e,n,t,r){var i="loading",o="loaded",u="requestComplete",c=function(){};t.set({timeout:1e4}),n.on(u,function(e){var n,t;for(e.state=o,t=e.onload;n=t.shift();)n()});var a=function(a,s){return s||(s=c),a.state===o?(s(),void 0):a.state===i?(a.onload.push(s),void 0):(a.state=i,a.onload=[s],n.emit("request",a,s),a.requested||(a.timer=e.setTimeout(function(){n.emit("requestTimeout",a)},t.get("timeout")),r(a,function(){e.clearTimeout(a.timer),n.emit(u,a)})),void 0)};return a});