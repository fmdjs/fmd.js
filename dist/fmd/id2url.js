fmd("id2url",["global","event","config"],function(g,b,e){var h=/^https?:\/\//i,k=(new Date).getTime();e.set({baseUrl:function(){var a=g.document.getElementsByTagName("script"),a=a[a.length-1];return(a.hasAttribute?a.src:a.getAttribute("src",4)).match(/(?:[\w]+)\:\/\/(?:[\w|\.|\:]+)\//i)[0]}()});e.register({keys:"resolve",name:"array"}).register({keys:"stamp",name:"object"});b.on("resolve",function(a){var c=e.get("resolve"),d;if(c)for(var f=0,b=c.length;f<b&&(d=c[f](a.id),d===a.id);f++);a.url=d?d:
a.id});b.on("stamp",function(a){var c=e.get("hasStamp")?k:null,d=e.get("stamp");if(d)for(var b in d)if(RegExp(b).test(a.id)){c=d[b];break}c&&(a.url+="?fmd.stamp="+c)});b.on("id2url",function(a){b.emit("resolve",a);h.test(a.url)||(a.url=e.get("baseUrl")+a.url);var c=a.url;c.lastIndexOf(".")<c.lastIndexOf("/")&&(a.url+=".js");b.emit("stamp",a)})});
